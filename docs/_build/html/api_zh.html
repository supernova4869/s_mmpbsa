


<!DOCTYPE html>
<html class="writer-html5" lang="en-US" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API文档 &mdash; s_mmpbsa 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/style.css?v=83ec55bd" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=855fc74a"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=31b82060"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

<script type="text/javascript">
  // 添加页面加载完成后的操作
  document.addEventListener('DOMContentLoaded', function() {
    // 平滑滚动
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });
    
    // 代码高亮增强
    if (typeof hljs !== 'undefined') {
      hljs.initHighlightingOnLoad();
    }
  });
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
<a href="index.html" class="icon icon-home"><img src="_static/favicon.ico" style="vertical-align: middle; margin-right: 10px; width: 24px; height: 24px;">s_mmpbsa</a>

<div class="searchbox" role="search">
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> 版本</span>
      v: 1.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>版本</dt>
        <dd><a href="https://s-mmpbsa.readthedocs.io/zh_CN/stable/">稳定版</a></dd>
        <dd><a href="https://s-mmpbsa.readthedocs.io/zh_CN/latest/">开发版</a></dd>
      </dl>
    </div>
  </div>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#project-structure">Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#main-modules">Main Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#main-module">main Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#mmpbsa-module">mmpbsa Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#analyzation-module">analyzation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#parse-tpr-module">parse_tpr Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#parse-ndx-module">parse_ndx Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#parse-xtc-module">parse_xtc Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#pdb-module">pdb Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#pbsa-module">pbsa Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#mm-module">mm Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#utils-module">utils Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#settings-module">settings Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#key-data-structures">Key Data Structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#smresult-structure">SMResult Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html#using-s-mmpbsa-as-a-library">Using s_mmpbsa as a Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#extending-s-mmpbsa">Extending s_mmpbsa</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#contribution-guidelines">Contribution Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#more-information">More Information</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">s_mmpbsa</a>
      </nav>

      <div class="wy-nav-content">
<div role="main" class="document" itemscope="" itemtype="http://schema.org/Article">
  <div itemprop="articleBody">
    
  <section id="api">
<h1>API文档<a class="headerlink" href="#api" title="Link to this heading"></a></h1>
<p>本文档为开发者提供s_mmpbsa的内部结构和主要功能的详细信息，帮助您理解、扩展或修改s_mmpbsa的功能。</p>
<section id="id1">
<h2>项目结构<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>s_mmpbsa的项目结构如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>s_mmpbsa/
├──<span class="w"> </span>src/
│<span class="w">   </span>├──<span class="w"> </span>main.rs<span class="w">           </span><span class="c1"># 程序入口点</span>
│<span class="w">   </span>├──<span class="w"> </span>mmpbsa.rs<span class="w">         </span><span class="c1"># MM/PB-SA计算的主要实现</span>
│<span class="w">   </span>├──<span class="w"> </span>analyzation.rs<span class="w">    </span><span class="c1"># 结果分析功能</span>
│<span class="w">   </span>├──<span class="w"> </span>parse_tpr.rs<span class="w">      </span><span class="c1"># TPR文件解析</span>
│<span class="w">   </span>├──<span class="w"> </span>parse_ndx.rs<span class="w">      </span><span class="c1"># NDX文件解析</span>
│<span class="w">   </span>├──<span class="w"> </span>parse_xtc.rs<span class="w">      </span><span class="c1"># XTC文件解析</span>
│<span class="w">   </span>├──<span class="w"> </span>pdb.rs<span class="w">            </span><span class="c1"># PDB文件处理</span>
│<span class="w">   </span>├──<span class="w"> </span>pbsa.rs<span class="w">           </span><span class="c1"># PB/SA计算</span>
│<span class="w">   </span>├──<span class="w"> </span>mm.rs<span class="w">             </span><span class="c1"># MM计算</span>
│<span class="w">   </span>├──<span class="w"> </span>utils.rs<span class="w">          </span><span class="c1"># 工具函数</span>
│<span class="w">   </span>└──<span class="w"> </span>settings.rs<span class="w">       </span><span class="c1"># 设置管理</span>
├──<span class="w"> </span>examples/<span class="w">             </span><span class="c1"># 示例文件</span>
├──<span class="w"> </span>docs/<span class="w">                 </span><span class="c1"># 文档</span>
├──<span class="w"> </span>Cargo.toml<span class="w">            </span><span class="c1"># Rust依赖管理</span>
└──<span class="w"> </span>README.md<span class="w">             </span><span class="c1"># 项目说明</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2>主要模块<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>下面详细介绍s_mmpbsa的主要模块及其功能。</p>
</section>
<section id="main">
<h2>main模块<a class="headerlink" href="#main" title="Link to this heading"></a></h2>
<p>main模块是程序的入口点，负责处理命令行参数、初始化环境并协调其他模块的工作。</p>
<p><strong>主要功能</strong>:
- 解析命令行参数
- 初始化程序环境
- 加载输入文件
- 协调MM/PB-SA计算
- 提供交互式命令行界面</p>
<p><strong>核心函数</strong>:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 程序入口点</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 显示欢迎信息</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">welcome</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 验证文件是否有效</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">confirm_file_validity</span><span class="p">(</span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 获取内置程序路径</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">get_built_in_gmx</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</section>
<section id="mmpbsa">
<h2>mmpbsa模块<a class="headerlink" href="#mmpbsa" title="Link to this heading"></a></h2>
<p>mmpbsa模块实现了MM/PB-SA计算的核心功能，包括能量计算、丙氨酸扫描等。</p>
<p><strong>主要功能</strong>:
- 执行MM/PB-SA计算
- 实现丙氨酸扫描
- 管理临时文件
- 协调MM和PB/SA计算</p>
<p><strong>核心函数</strong>:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 执行MM/PB-SA计算</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">fun_mmpbsa_calculations</span><span class="p">(</span><span class="n">tpr_path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">SMResult</span><span class="p">,</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 实现丙氨酸突变</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">ala_mutate</span><span class="p">(</span><span class="n">tpr_path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 设置进度条样式</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">set_style</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">indicatif</span><span class="p">::</span><span class="n">ProgressStyle</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 计算MM/PB-SA能量</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">calculate_mmpbsa</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">SMResult</span><span class="p">,</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 计算MM能量</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">calc_mm</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(</span><span class="n">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 计算PB/SA能量</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">calc_pbsa</span><span class="p">(</span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(</span><span class="n">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</section>
<section id="analyzation">
<h2>analyzation模块<a class="headerlink" href="#analyzation" title="Link to this heading"></a></h2>
<p>analyzation模块实现了结果分析功能，包括结果的处理、可视化和导出。</p>
<p><strong>主要功能</strong>:
- 处理MM/PB-SA计算结果
- 提供结果可视化
- 导出结果数据
- 支持各种分析操作</p>
<p><strong>核心数据结构和函数</strong>:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// 存储MM/PB-SA计算结果的数据结构</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">SMResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">dh</span><span class="p">:</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">          </span><span class="c1">// 焓变</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">mm</span><span class="p">:</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">          </span><span class="c1">// MM能量</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">pb</span><span class="p">:</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">          </span><span class="c1">// PB能量</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">sa</span><span class="p">:</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">          </span><span class="c1">// SA能量</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">time</span><span class="p">:</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">        </span><span class="c1">// 时间点</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">residues</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w">    </span><span class="c1">// 残基名称</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">res_energy</span><span class="p">:</span><span class="w"> </span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">,</span><span class="w">  </span><span class="c1">// 残基能量</span>
<span class="w">    </span><span class="c1">// ... 其他字段</span>
<span class="p">}</span>

<span class="c1">// 分析功能主控制器</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">analyze_controller</span><span class="p">(</span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">SMResult</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 获取时间范围</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">get_time_range</span><span class="p">(</span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">SMResult</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// 获取时间点对应的索引</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">get_time_index</span><span class="p">(</span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">SMResult</span><span class="p">,</span><span class="w"> </span><span class="n">time</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</section>
<section id="parse-tpr">
<h2>parse_tpr模块<a class="headerlink" href="#parse-tpr" title="Link to this heading"></a></h2>
<p>parse_tpr模块负责解析Gromacs的TPR文件，提取系统的拓扑信息和原子参数。</p>
<p><strong>主要功能</strong>:
- 解析TPR文件格式
- 提取原子类型、电荷、质量等信息
- 构建系统拓扑结构
- 提供对拓扑数据的访问接口</p>
</section>
<section id="parse-ndx">
<h2>parse_ndx模块<a class="headerlink" href="#parse-ndx" title="Link to this heading"></a></h2>
<p>parse_ndx模块负责解析Gromacs的NDX文件，提取系统的分组信息。</p>
<p><strong>主要功能</strong>:
- 解析NDX文件格式
- 提取分组名称和原子索引
- 提供对分组数据的访问接口</p>
</section>
<section id="parse-xtc">
<h2>parse_xtc模块<a class="headerlink" href="#parse-xtc" title="Link to this heading"></a></h2>
<p>parse_xtc模块负责解析Gromacs的XTC文件，提取系统的坐标信息。</p>
<p><strong>主要功能</strong>:
- 解析XTC文件格式
- 提取原子坐标数据
- 支持轨迹的随机访问
- 处理大型轨迹文件</p>
</section>
<section id="pdb">
<h2>pdb模块<a class="headerlink" href="#pdb" title="Link to this heading"></a></h2>
<p>pdb模块负责处理PDB文件，包括读取、修改和写入PDB文件。</p>
<p><strong>主要功能</strong>:
- 读取PDB文件
- 修改PDB文件中的原子坐标和属性
- 写入PDB文件
- 支持将能量信息编码到PDB文件中</p>
</section>
<section id="pbsa">
<h2>pbsa模块<a class="headerlink" href="#pbsa" title="Link to this heading"></a></h2>
<p>pbsa模块实现了PB和SA能量计算的功能，包括调用外部程序（如APBS）进行计算。</p>
<p><strong>主要功能</strong>:
- 准备PB计算的输入文件
- 调用APBS进行PB计算
- 计算SA能量
- 处理PB/SA计算的结果</p>
</section>
<section id="mm">
<h2>mm模块<a class="headerlink" href="#mm" title="Link to this heading"></a></h2>
<p>mm模块实现了MM能量计算的功能，包括范德华和静电相互作用的计算。</p>
<p><strong>主要功能</strong>:
- 计算范德华相互作用能
- 计算静电相互作用能
- 实现距离截断优化
- 支持并行计算</p>
</section>
<section id="utils">
<h2>utils模块<a class="headerlink" href="#utils" title="Link to this heading"></a></h2>
<p>utils模块提供了各种通用工具函数，供其他模块使用。</p>
<p><strong>主要功能</strong>:
- 文件操作
- 字符串处理
- 数学计算
- 系统调用</p>
</section>
<section id="settings">
<h2>settings模块<a class="headerlink" href="#settings" title="Link to this heading"></a></h2>
<p>settings模块负责管理程序的设置，包括读取、修改和保存设置。</p>
<p><strong>主要功能</strong>:
- 读取settings.ini文件
- 提供设置的访问接口
- 保存设置更改
- 管理程序路径配置</p>
</section>
<section id="id3">
<h2>关键数据结构<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<section id="smresult">
<h3>SMResult结构体<a class="headerlink" href="#smresult" title="Link to this heading"></a></h3>
<p>SMResult结构体是s_mmpbsa的核心数据结构，用于存储MM/PB-SA计算的结果。</p>
<p><strong>主要字段</strong>:
- <strong>dh</strong>: 焓变数组
- <strong>mm</strong>: MM能量数组
- <strong>pb</strong>: PB能量数组
- <strong>sa</strong>: SA能量数组
- <strong>time</strong>: 时间点数组
- <strong>residues</strong>: 残基名称列表
- <strong>res_energy</strong>: 残基能量矩阵
- <strong>atom_energy</strong>: 原子能量矩阵</p>
<p><strong>主要方法</strong>:
- <strong>new()</strong>: 创建SMResult实例
- <strong>to_bin()</strong>: 将结果序列化到二进制文件
- <strong>from_bin()</strong>: 从二进制文件反序列化结果</p>
</section>
</section>
<section id="s-mmpbsa">
<h2>使用s_mmpbsa作为库<a class="headerlink" href="#s-mmpbsa" title="Link to this heading"></a></h2>
<p>s_mmpbsa也可以作为Rust库使用，供其他Rust程序调用其功能。</p>
<p><strong>示例代码</strong>:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">s_mmpbsa</span><span class="p">::</span><span class="n">mmpbsa</span><span class="p">::</span><span class="n">fun_mmpbsa_calculations</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">s_mmpbsa</span><span class="p">::</span><span class="n">analyzation</span><span class="p">::</span><span class="n">SMResult</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 设置计算参数</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">tpr_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/md.tpr&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">xtc_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/md_xtc.xtc&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ndx_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/index.ndx&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rec_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// 受体组索引</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">lig_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1">// 配体组索引</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">time_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span><span class="w">  </span><span class="c1">// 时间间隔（ns）</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">298.15</span><span class="p">;</span><span class="w">  </span><span class="c1">// 温度（K）</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">conc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.15</span><span class="p">;</span><span class="w">    </span><span class="c1">// 盐浓度（mol/L）</span>

<span class="w">    </span><span class="c1">// 执行MM/PB-SA计算</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fun_mmpbsa_calculations</span><span class="p">(</span>
<span class="w">        </span><span class="n">tpr_path</span><span class="p">,</span>
<span class="w">        </span><span class="n">xtc_path</span><span class="p">,</span>
<span class="w">        </span><span class="n">ndx_path</span><span class="p">,</span>
<span class="w">        </span><span class="n">rec_group</span><span class="p">,</span>
<span class="w">        </span><span class="n">lig_group</span><span class="p">,</span>
<span class="w">        </span><span class="n">time_interval</span><span class="p">,</span>
<span class="w">        </span><span class="n">temp</span><span class="p">,</span>
<span class="w">        </span><span class="n">conc</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 处理计算结果</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;平均结合能: {:.2} kJ/mol&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">dh</span><span class="p">.</span><span class="n">mean</span><span class="p">().</span><span class="n">unwrap</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// 保存结果到文件</span>
<span class="w">    </span><span class="n">result</span><span class="p">.</span><span class="n">to_bin</span><span class="p">(</span><span class="s">&quot;result.sm&quot;</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h2>扩展s_mmpbsa<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<p>如果您想扩展s_mmpbsa的功能，可以考虑以下几个方面：</p>
<ol class="arabic simple">
<li><p><strong>添加新的能量计算方法</strong>：可以在mm模块和pbsa模块中添加新的能量计算方法。</p></li>
<li><p><strong>支持新的输入文件格式</strong>：可以在parse_tpr、parse_ndx和parse_xtc模块中添加对新文件格式的支持。</p></li>
<li><p><strong>增强分析功能</strong>：可以在analyzation模块中添加新的分析方法和可视化功能。</p></li>
<li><p><strong>优化性能</strong>：可以优化计算核心，提高计算速度和内存使用效率。</p></li>
<li><p><strong>添加新的溶剂化模型</strong>：可以添加对其他溶剂化模型的支持，如GB模型、3D-RISM等。</p></li>
</ol>
</section>
<section id="id5">
<h2>贡献指南<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>如果您想为s_mmpbsa项目做出贡献，请遵循以下步骤：</p>
<ol class="arabic simple">
<li><p>Fork GitHub仓库</p></li>
<li><p>创建您的特性分支</p></li>
<li><p>提交您的更改</p></li>
<li><p>推送到您的分支</p></li>
<li><p>创建新的Pull Request</p></li>
</ol>
<p>在提交代码前，请确保您的代码符合项目的编码规范，并且通过了所有测试。</p>
</section>
<section id="id6">
<h2>更多信息<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="usage.html"><span class="doc">Usage</span></a>：使用指南</p></li>
<li><p><a class="reference internal" href="installation.html"><span class="doc">Installation</span></a>：安装说明</p></li>
<li><p><a class="reference internal" href="faq.html"><span class="doc">Frequently Asked Questions</span></a>：常见问题解答</p></li>
</ul>
</section>
</section>


  </div>
  <div class="articleComments">
    
    <!-- 这里可以添加评论系统 -->
    
  </div>
</div>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<footer>
  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
    
    
  </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2025, Supernova.
    </p>
  </div>
  由 <a href="https://www.sphinx-doc.org/" target="_blank">Sphinx</a> 8.1.3 和 <a href="https://github.com/readthedocs/sphinx_rtd_theme" target="_blank">RTD 主题</a>  构建.
  <!-- 添加额外的页脚内容 -->
  <div class="extrafooter">
    <p>如有任何问题或建议，请在 <a href="https://github.com/your_username/s_mmpbsa/issues" target="_blank">GitHub Issues</a> 上提交。</p>
  </div>
  
</footer>


</body>
</html>