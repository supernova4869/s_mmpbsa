{# 自定义布局模板，继承自sphinx_rtd_theme的默认布局 #}
{% extends "!layout.html" %}

{# 自定义页头 #}
{% block header %}
<div class="wy-header-stacked">
  <div class="wy-header-stacked-top">
    {% include "header.html" %}
  </div>
  <div class="wy-header-stacked-bottom">
    {% include "breadcrumbs.html" %}
  </div>
</div>
{% endblock %}

{# 自定义侧边栏 #}
{% block sidebartitle %}
<a href="{{ pathto(master_doc) }}" class="icon icon-home"><img src="{{ pathto('_static/favicon.ico', 1) }}" style="vertical-align: middle; margin-right: 10px; width: 24px; height: 24px;">{{ project }}</a>
{% if theme_display_version %}
{%- set nav_version = version %}
{% if READTHEDOCS and current_version %}
{%- set nav_version = current_version %}
{% endif %}
{% if nav_version %}
<div class="version">
  {{ nav_version }}
</div>
{% endif %}
{% endif %}
<div class="searchbox" role="search">
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> 版本</span>
      v: {{ version }}
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>版本</dt>
        <dd><a href="https://s-mmpbsa.readthedocs.io/zh_CN/stable/">稳定版</a></dd>
        <dd><a href="https://s-mmpbsa.readthedocs.io/zh_CN/latest/">开发版</a></dd>
      </dl>
    </div>
  </div>
</div>
{% endblock %}

{# 自定义内容区域 #}
{% block content %}
<div role="main" class="document" itemscope="" itemtype="http://schema.org/Article">
  <div itemprop="articleBody">
    {% block body %}{% endblock %}
  </div>
  <div class="articleComments">
    {% block comments %}
    <!-- 这里可以添加评论系统 -->
    {% endblock %}
  </div>
</div>
{% endblock %}

{# 自定义页脚 #}
{% block footer %}
<footer>
  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
    {% if next %}
    <a href="{{ next.link }}" class="btn btn-neutral float-right" title="{{ next.title|striptags|e }}">下一章 <span class="fa fa-arrow-right"></span></a>
    {% endif %}
    {% if prev %}
    <a href="{{ prev.link }}" class="btn btn-neutral float-left" title="{{ prev.title|striptags|e }}"><span class="fa fa-arrow-left"></span> 上一章</a>
    {% endif %}
  </div>

  <hr/>

  <div role="contentinfo">
    <p>
    {%- if show_copyright %}
      {%- if hasdoc('copyright') %}
        {% trans path=pathto('copyright'), copyright=copyright|e %}&copy; <a href="{{ path }}">Copyright</a> {{ copyright }}.{% endtrans %}
      {%- else %}
        {% trans copyright=copyright|e %}&copy; Copyright {{ copyright }}.{% endtrans %}
      {%- endif %}
    {%- endif %}

    {%- if build_id and build_url %}
      {% trans build_url=build_url, build_id=build_id %}<span class="build">Build <a href="{{ build_url }}">{{ build_id }}</a>.</span>{% endtrans %}
    {%- endif %}
    </p>
  </div>

  {%- if show_sphinx %}
  {% trans %}由 <a href="https://www.sphinx-doc.org/" target="_blank">Sphinx</a> {{ sphinx_version }} 和 <a href="https://github.com/readthedocs/sphinx_rtd_theme" target="_blank">RTD 主题</a> {{ theme_version }} 构建{% endtrans %}.
  {%- endif %}

  {%- block extrafooter %}
  <!-- 添加额外的页脚内容 -->
  <div class="extrafooter">
    <p>如有任何问题或建议，请在 <a href="https://github.com/your_username/s_mmpbsa/issues" target="_blank">GitHub Issues</a> 上提交。</p>
  </div>
  {% endblock %}
</footer>
{% endblock %}

{# 自定义CSS和JS #}
{% block extrahead %}
{# 添加额外的CSS和JavaScript文件 #}
<script type="text/javascript">
  // 添加页面加载完成后的操作
  document.addEventListener('DOMContentLoaded', function() {
    // 平滑滚动
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });
    
    // 代码高亮增强
    if (typeof hljs !== 'undefined') {
      hljs.initHighlightingOnLoad();
    }
  });
</script>
{% endblock %}

{# 自定义警告框样式 #}
{% block admonition %}<div class="admonition {{ admonitiontype }}">
  {% if title %}<p class="admonition-title">{{ title }}</p>{% endif %}
  {{ content }}
</div>{% endblock %}

{# 自定义代码块样式 #}
{% block highlight %}<div class="highlight-{{ language }} notranslate"><div class="highlight">{{ content }}</div></div>{% endblock %}